<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Picas y fijas</title>
    <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;500&display=swap" rel="stylesheet"/>
    <link rel="stylesheet" href="style.css" />
     <script>let numeroAAdivinar = [];
let intentos = 0;

const contador = document.getElementById('contador');
const intentoInput = document.getElementById('intento');
const flipButton = document.getElementById('flip-button');
const resetButton = document.getElementById('reset-button');
const tablero = document.querySelector('.tablero');

// hacer el numero
function generarNumeroAAdivinar() {
    const numeros = [];
    while (numeros.length < 4) {
        let num = Math.floor(Math.random() * 10);  
        if (!numeros.includes(num)) {numeros.push(num);}}
    [A, B, C, D] = numeros;
    numeroAAdivinar = [A, B, C, D];

function verificarIntento(intento) {
    let resultado = [];
    let intentosNumeros = intento.split('').map(Number);
    
    // cpmparar
    for (let i = 0; i < 4; i++) {
        if (intentosNumeros[i] === numeroAAdivinar[i]) {
            resultado.push('true');
        } else if (numeroAAdivinar.includes(intentosNumeros[i])) {
            resultado.push('false');
        } else {
            resultado.push('null');
        }
    }

    // pal cuadro
    for (let i = 0; i < 4; i++) {
        const div = document.getElementById(i + 1 + intentos * 4);
        div.textContent = intentosNumeros[i];  
        div.dataset.state = resultado[i];      
        if (resultado[i] === 'true') {
            div.style.backgroundColor = 'green';
        } else if (resultado[i] === 'false') {
            div.style.backgroundColor = 'yellow';
        } else {
            div.style.backgroundColor = '';
        }
    }
}

// para pendejos
function intentar() {
    const intento = intentoInput.value;
    if (intento.length !== 4 || isNaN(intento)) {
        alert('Hay algo que no es un numero');
        return;
    }

    intentos++;
    contador.textContent = intentos;  // contador

    verificarIntento(intento);

    // Limpiar 
    intentoInput.value = '';
}

// 
flipButton.addEventListener('click', intentar);

// para poder tocar enter
intentoInput.addEventListener('keydown', (event) => {
    if (event.key === 'Enter') { 
        intentar();  
        event.preventDefault();  
    }
});

// pa los pendejos parte 2
resetButton.addEventListener('click', () => {
    location.reload();  
});

if (contador.textContent === '0') {
    generarNumeroAAdivinar();
}
  </script>
  </head>
  <body>
    <div class="container">
      <div class="titulo">
        <p>PICAS Y FIJAS</p>
      </div>
      

        <p hidden id="contador">0</p>
      
      <div class="area"></div>
          <div class="tablero">
            <div class="espacio" id="5" data-state="null"></div>
            <div class="espacio" id="6" data-state="null"></div>
            <div class="espacio" id="7" data-state="null"></div>
            <div class="espacio" id="8" data-state="null"></div>
            <div class="espacio" id="9" data-state="null"></div>
            <div class="espacio" id="10" data-state="null"></div>
            <div class="espacio" id="11" data-state="null"></div>
            <div class="espacio" id="12" data-state="null"></div>
            <div class="espacio" id="13" data-state="null"></div>
            <div class="espacio" id="14" data-state="null"></div>
            <div class="espacio" id="15" data-state="null"></div>
            <div class="espacio" id="16" data-state="null"></div>
            <div class="espacio" id="17" data-state="null"></div>
            <div class="espacio" id="18" data-state="null"></div>
            <div class="espacio" id="19" data-state="null"></div>
            <div class="espacio" id="20" data-state="null"></div>
            <div class="espacio" id="21" data-state="null"></div>
            <div class="espacio" id="22" data-state="null"></div>
            <div class="espacio" id="23" data-state="null"></div>
            <div class="espacio" id="24" data-state="null"></div>
            <div class="espacio" id="25" data-state="null"></div>
            <div class="espacio" id="26" data-state="null"></div>
            <div class="espacio" id="27" data-state="null"></div>
            <div class="espacio" id="28" data-state="null"></div>
          </div>
<p class="label">Ingresar su intento:</p>
          <textarea name="" id="intento"></textarea>

      <div class="buttons">
        <button id="reset-button">Rendirse</button>
        <button id="flip-button">Intentar</button>
      </div>
      
    </div>
   
  </body>
</html>
